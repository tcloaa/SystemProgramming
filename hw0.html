<!doctype html>
<!--
  Material Design Lite
  Copyright 2015 Google Inc. All rights reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="A front-end template that helps you build fast, modern mobile web apps.">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HW0</title>

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="images/android-desktop.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="images/ios-desktop.png">

    <link rel="shortcut icon" href="images/favicon.png">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <link href='//fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    <link rel="stylesheet" href="material.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/buttons-min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  </head>
  <body>
    <div class="demo-layout mdl-layout mdl-layout--fixed-header mdl-js-layout mdl-color--grey-100">
      <header class="demo-header mdl-layout__header mdl-layout__header--scroll mdl-color--grey-100 mdl-color-text--grey-800">
        <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">HW0</span>
          <div class="mdl-layout-spacer"></div>
        </div>
      </header>
      <div class="demo-ribbon"></div>
      <main class="demo-main mdl-layout__content">
        <div class="demo-container mdl-grid">
          <div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
          <div class="demo-content mdl-color--white mdl-shadow--4dp content mdl-color-text--grey-800 mdl-cell mdl-cell--8-col">
            <div class="demo-crumbs mdl-color-text--grey-500">
                CS 241 &gt; Wikibook &gt; HW0
            </div>
            <h3>HW0</h3>

<h1>Welcome!</h1>
<pre class="highlight"><code class="language-C">// First can you guess which lyrics have been transformed into this C-like system code?
char q[] = &quot;Do you wanna build a C99 program?&quot;;
#define or &quot;go debugging with gdb?&quot;
static unsigned int i = sizeof(or) != strlen(or);
char* ptr = &quot;lathe&quot;; size_t come = fprintf(stdout,&quot;%s door&quot;, ptr+2);
int away = ! (int) * &quot;&quot;;

int* shared = mmap(NULL, sizeof(int*), PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);
munmap(shared,sizeof(int*));

if(!fork()) { execlp(&quot;man&quot;,&quot;man&quot;,&quot;-3&quot;,&quot;ftell&quot;, (char*)0); perror(&quot;failed&quot;); }
if(!fork()) { execlp(&quot;make&quot;,&quot;make&quot;, &quot;snowman&quot;, (char*)0); execlp(&quot;make&quot;,&quot;make&quot;, (char*)0)); }

exit(0);</code></pre>


<h1>So you want to master System Programming?</h1>
<pre class="highlight"><code class="language-C">puts(&quot;Bring your near-completed answers the problems below&quot;);
puts(&quot; to the first lab to show that you've been working on this&quot;);
printf(&quot;A few \&quot;don't knows\&quot; or \&quot;unsure\&quot; is fine for lab 1&quot;); 
puts(&quot;Warning; your peers will be working hard for this class&quot;);
puts(&quot;This is not CS225; you will be pushed much harder to&quot;);
puts(&quot; work things out on your own&quot;);
fprintf(stdout,&quot;the point is that this homework is a stepping stone to all future assignments&quot;);
char p[] = &quot;so you will want to clear up any confusions or misconceptions.&quot;;
write(1, p, strlen(p) );
char buffer[1024];
sprintf(buffer,&quot;For grading purposes it will be graded as part of your lab %d work.&quot;, 1);
write(1, buffer, strlen(buffer));
printf(&quot;Press Return to continue\n&quot;);
read(0, buffer, sizeof(buffer));</code></pre>


<h2>Watch the videos and write up your answers to the following questions.</h2>
<p><a href="http://cs-education.github.io/sys/">http://cs-education.github.io/sys/</a></p>
<p>The in-browser virtual machine runs entirely in Javascript and is fastest in Chrome. Note the VM and any code you write is reset when you reload the page <em>So copy your code to a separate document</em></p>
<h3>Chapter 1</h3>
<ul>
<li>Hello World (System call style)</li>
<li>Write a program that uses write() to print out "Hi! My name is &lt;Your Name&gt;".</li>
<li>Hello Standard Error Stream</li>
<li>Write a program that uses write() to prints out a triangle of height n to Standard Error<ul>
<li>n should be a variable and the triangle should look like this for n = 3<br />
```C<br />
<em><br />
</em>*</li>
</ul>
<hr />
<p>```</p>
</li>
<li>Writing to files</li>
<li>Take your program from "Hello World" and have it write to a file<ul>
<li>Make sure to to use some interesting flags and mode for <code>open()</code></li>
<li><code>man 2 open</code> is your friend</li>
</ul>
</li>
<li>Not everything is a system call</li>
<li>Take your program from "Writing to files" and replace it with <code>printf()</code></li>
<li>Name some differences from <code>write()</code> and <code>printf()</code></li>
</ul>
<h3>Chapter 2</h3>
<ul>
<li>Not all bytes are 8 bits?</li>
<li>How many bits are there in a byte?</li>
<li>How many bytes is a <code>char</code>?</li>
<li>Tell me how many bytes the following are on your machine: <code>int, double, float, long, long long</code></li>
<li>Follow the int pointer</li>
<li>On a machine with 8 byte integers:<br />
<code>C
  int main(){
      int data[8];
  }</code><br />
  If the address of data is <code>0x7fbd9d40</code>, then what is the address of <code>data+2</code>?</li>
<li>What is <code>data[3]</code> equivalent to in C?</li>
<li><code>sizeof</code> character arrays, incrementing pointers</li>
</ul>
<p>Remember the type of a string constant <code>"abc"</code> is an array.<br />
  - Why does this segfault?<br />
<code>C
  char *ptr = "hello";
  *ptr = 'J';</code><br />
  - What does <code>sizeof("Hello\0World")</code> return?<br />
  - What does <code>strlen("Hello\0World")</code> return?<br />
  - Give an example of X such that <code>sizeof(X)</code> is 3<br />
  - Give an example of Y such at <code>sizeof(Y)</code> might be 4 or 8 depending on the machine.</p>
<h3>Chapter 3</h3>
<ul>
<li>Program arguments <code>argc</code> <code>argv</code></li>
<li>Name me two ways to find the length of <code>argv</code></li>
<li>What is <code>argv[0]</code></li>
<li>Environment Variables</li>
<li>Where are the pointers to environment variables stored?</li>
<li>String searching (Strings are just char arrays)</li>
<li>
<p>On a machine where pointers are 8 bytes and with the following code:<br />
<code>C
  char *ptr = "Hello";
  char array[] = "Hello";</code><br />
  What is the results of <code>sizeof(ptr)</code> and <code>sizeof(array)</code>? Explain why.</p>
</li>
<li>
<p>Lifetime of automatic variables</p>
</li>
<li>What datastucture is managing the lifetime of automatic variables?</li>
</ul>
<h3>Chapter 4</h3>
<ul>
<li>Memory allocation using <code>malloc</code>, heap and time</li>
<li>If I want to use data after the lifetime of the function it was created in, then where should I put it and how do I put it there?</li>
<li>Fill in the blank. In a good C program: "For every malloc there is a ___".</li>
<li>Heap allocation Gotchas</li>
<li>Name one reason <code>malloc</code> can fail.</li>
<li>Name some differences between <code>time()</code> and <code>ctime()</code></li>
<li>What is wrong with this code snippet?<br />
<code>C
  free(ptr);
  free(ptr);</code></li>
<li>What is wrong with this code snippet?<br />
<code>C
  free(ptr);
  printf("%s\n", ptr);</code></li>
<li>How can one avoid the previous 2 mistakes? </li>
<li>struct, typedefs and a linked list</li>
<li>Create a struct that represents a Person and typedef, so that "struct Person" can be replaced with a single word.<ul>
<li>A person should contain the following information: name, age, friends (array of people).</li>
</ul>
</li>
<li>Now make a person "Bob" on the heap who is 40 years old and his only friend is himself :(</li>
<li>Duplicating strings, memory allocation and deallocation of structures</li>
<li>Create functions to create and destroy a Person.<ul>
<li><code>create()</code> should take a name and make a copy of the name and also an age. Use malloc to reserve sufficient memory. Be sure initialize all fields (why?).</li>
<li><code>destroy()</code> should free up not only the memory of the person struct but also all its attributes (the array if it exists and the string).</li>
</ul>
</li>
</ul>
<h3>Chapter 5</h3>
<ul>
<li>Reading characters, Trouble with gets</li>
<li>What functions can be used for getting characters for <code>stdin</code> and writing them to <code>stdout</code>?</li>
<li>Name one issue with <code>gets()</code></li>
<li>Introducing <code>sscanf</code> and friends</li>
<li>Write code that parses a the string "Hello 5 World" and initializes 3 variables to ("Hello", 5, "World") respectively.</li>
<li><code>getline</code> is useful</li>
<li>What does one need to define before using <code>getline()</code>?</li>
<li>Write a C program to print out the content of a file line by line using <code>getline()</code></li>
</ul>
<h3>C Development (A web search is useful here)</h3>
<ul>
<li>What compiler flag is used to generate a debug build?</li>
<li>You modify the makefile to generate debug builds and type <code>make</code> again. Explain why this is insufficient to generate a new build.</li>
<li>Are tabs or spaces used in Makefiles?</li>
<li>What are the differences between heap and stack memory?</li>
<li>Are there other kinds of memory in a process?</li>
</ul>          </div>
        </div>
      </main>
    </div>
    <script src="check_mc.js"></script>
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-71027581-1', 'auto');
	  ga('send', 'pageview');

	</script>
  </body>
</html>
